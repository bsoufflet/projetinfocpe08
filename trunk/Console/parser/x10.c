#include "x10.h"void int2hex(char* resultat,int valeur){	printf ("int2hex valeur recue %d\n", valeur);	sprintf (resultat, "%x", valeur);}//*****************************************************************int adresse_transmit (int fd, unsigned char adresse){	printf ("dans adresse transmit\n");	com_serie[0] = header_adresse;	com_serie[1] = adresse;	printf ("adresse %x\n", adresse);	write (fd, com_serie, 2);		checksum = ((com_serie[0]+com_serie[1])& 0xff);		usleep(100000);		read (fd, com_serie, 1);		if(com_serie[0] != checksum) 	{		printf("Caca mou\n");		return 1;	}			com_serie[0] = transmit_ok;	write (fd, com_serie, 1);			checksum = interface_ready;		usleep(1000000);		com_serie[0] = 0xFF;		read (fd, com_serie, 1);		if(com_serie[0] != checksum) 	{		printf("Caca mou2 : %x\n",com_serie[0]);		//close (fd);		return 1;	}	return 0;}//*****************************************************************int prise_on (int fd, int house_code){	int fonction;	printf ("dans on\n");	com_serie[0] = header_fonction;	fonction = 16*house_code+2;	memcpy(&com_serie[1], &fonction, 1);		write (fd, com_serie, 2);		checksum = ((com_serie[0]+com_serie[1])& 0xff);		usleep(100000);		read (fd, com_serie, 1);		if(com_serie[0] != checksum) 	{		printf("Caca mou3\n");		return 1;	}		com_serie[0] = transmit_ok;	write (fd, com_serie, 1);			checksum = interface_ready;		usleep(1000000);		com_serie[0] = 0xFF;		read (fd, com_serie, 1);		if(com_serie[0] != checksum) 	{		printf("Caca mou4 : %x\n",com_serie[0]);		//close (fd);		return 1;	}	return 0;}//*****************************************************************int prise_off (int fd, int house_code){	int fonction;	printf ("dans off\n");	com_serie[0] = header_fonction;	fonction = 16*house_code+3;	memcpy(&com_serie[1], &fonction, 1);		write (fd, com_serie, 2);		checksum = ((com_serie[0]+com_serie[1])& 0xff);		usleep(100000);		read (fd, com_serie, 1);		if(com_serie[0] != checksum) 	{		printf("Caca mou5\n");		return 1;	}		com_serie[0] = transmit_ok;	write (fd, com_serie, 1);			checksum = interface_ready;		usleep(1000000);		com_serie[0] = 0xFF;		read (fd, com_serie, 1);		if(com_serie[0] != checksum) 	{		printf("Caca mou6 : %x\n",com_serie[0]);		//close (fd);		return 1;	}	return 0;}